class LongTextCodeFormField extends FormField {
    renderInput(value) {
        return h('div', {}, [
            h('textarea',
                {
                    attrs:{
                        name: this.formName(),
                    },
                    style:{
                        display:'none'
                    }
                }, value),

            h('div', {
            props: {
                id: 'f_'+this.key,
                disabled: !this.isMutable(),
            },
            style:{
                height:'20px',
                borderBottom:'1px solid #cacaca'
            },
            attrs: {
              //  contenteditable: this.isMutable(),
                name: this.formName(),
            },
            hook: {
                insert: (vnode) => {

                    console.log('build code editor2');
                    this.editor = ace.edit(vnode.elm);
                    this.editor.setOptions({maxLines:40, minLines:1, highlightActiveLine:false, showPrintMargin:false})
                    this.editor.resize();
                    this.editor.getSession().on('change', (e) => {
                        // e.type, etc
                        this.onChange(e);
                    });
                }
            }
        }, [value || ''])] );
    }

    valueFromEvent(e) {
        return this.editor.getValue();
    }
}

RBForm.registerFieldType('text:code', LongTextCodeFormField);