const mingo = require('mingo');

module.exports = function filter(records, query)
{
    let q;
    try
    {
        q = new mingo.Query(query);
    }
    catch(e)
    {
        Debug.warn('bad query filter', e, query);
        return [];
    }

    return q.find(records).all();
};
